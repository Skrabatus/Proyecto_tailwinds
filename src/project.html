<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proyecto Tailwindcss</title>
    <link href="../dist/output.css" rel="stylesheet">
    

    <style>
        .caja{
            border: 1px solid rgb(40, 105, 204)
        }

        
        
        
    </style>
</head>
<body>

    <nav class="bg-indigo-500">
        <div class="container py-2 mx-auto px-10 flex flex-wrap items-center justify-between">
            
            <!-- BEGIN logo --> 
            <div  class="flex items-center">
                <img src="images/logou2.png" class="h-14"> 
                <h2 class="text-white">Universidad de Córdoba</h2>
            </div>
            <!-- END logo -->


            <!-- ENG Botón responsive -->
            <button id="bntResponsive" class="p-2 ml-3 text-sm text-gray-500 rounded-lg md:hidden hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-white" data-collapse-toggle="mobile-menu" type="button"  aria-controls="mobile-menu" aria-expanded="false">
                <svg id="iconOpen" class="text-white w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>
                <svg id="iconClose" class="text-white hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
            </button>
            <!-- END Botón responsive -->


            <!-- BEGIN items adicionales -->
            <div class="hidden md:block md:w-auto w-full " id="mobile-menu">
                <ul class="flex flex-col mt-4 md:flex-row md:space-x-8 md:mt-0 md:text-sm md:font-medium">
                    <li>
                        <a href="#" class="block py-2 pr-4 pl-3 text-white bg-blue-700 rounded md:bg-transparent md:text-white md:p-0 dark:text-white" aria-current="page">Home</a>
                    </li>
                    <li>
                        <a href="#" class="block py-2 pr-4 pl-3 text-white border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 ">About</a>
                    </li>
                    <li>
                        <a href="#" class="block py-2 pr-4 pl-3 text-white border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 ">Services</a>
                    </li>
                    <li>
                        <a href="#" class="block py-2 pr-4 pl-3 text-white border-b border-gray-100 hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 ">Pricing</a>
                    </li>
                    <li>
                        <a href="#" class="block py-2 pr-4 pl-3 text-white hover:bg-gray-50 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 ">Contact</a>
                    </li>
                </ul>
              </div>
            <!-- END items adicionales -->
            
            
        </div>
    </nav>

    <nav class="md:bg-gray-800 bg-gray-500 p-1">
        <div class="container mx-auto px-10 w-full">
            <ul class="flex flex-col justify-center md:flex-row mt-1 text-xs md:text-sm">
                <li>
                    <a href="#" class="transition hover:-translate-y-1 hover:scale-110 hover:bg-indigo-500 duration-300 
                                      block py-2
                                    text-gray-100 border-b border-gray-400 
                                      hover:rounded-md text-sm 
                                    
                                      hover:text-gray-200
                                      md:border-0 md:mx-2 md:px-3" aria-current="page">Inicio</a>
                </li>
                <li>
                    <a href="#" class="transition hover:-translate-y-1 hover:scale-110 hover:bg-indigo-500 duration-300 
                                        block py-2
                                    text-gray-100 border-b border-gray-400 hover:rounded-md text-sm hover:text-gray-200
                                      md:border-0 md:mx-2 md:px-3" aria-current="page">Mis Cursos</a>
                </li>
                <li>
                    <a href="#" class="transition hover:-translate-y-1 hover:scale-110 hover:bg-indigo-500 duration-300  
                                        block py-2
                                    text-gray-100 border-b border-gray-400 hover:rounded-md text-sm hover:text-gray-200
                                      md:border-0 md:mx-2 md:px-3" aria-current="page">Calificaciones</a>
                </li>
                <li>
                    <a href="#" class="transition hover:-translate-y-1 hover:scale-110 hover:bg-indigo-500 duration-300 
                                        block py-2
                                    text-gray-100 border-b border-gray-400 hover:rounded-md text-sm hover:text-gray-200
                                      md:border-0 md:mx-2 md:px-3" aria-current="page">Insignias</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- This example requires Tailwind CSS v2.0+ -->
<div class="relative z-10 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true" id="mimodal">
    <!--
      Background backdrop, show/hide based on modal state.
  
      Entering: "ease-out duration-300"
        From: "opacity-0"
        To: "opacity-100"
      Leaving: "ease-in duration-200"
        From: "opacity-100"
        To: "opacity-0"
    -->
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>
  
    <div class="fixed z-10 inset-0 overflow-y-auto">
      <div class="flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0">
        <!--
          Modal panel, show/hide based on modal state.
  
          Entering: "ease-out duration-300"
            From: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
            To: "opacity-100 translate-y-0 sm:scale-100"
          Leaving: "ease-in duration-200"
            From: "opacity-100 translate-y-0 sm:scale-100"
            To: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
        -->
        <div class="relative bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-lg sm:w-full">
          <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
            <div class="sm:flex sm:items-start">
              <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-600 sm:mx-0 sm:h-10 sm:w-10">
                <!-- Heroicon name: outline/exclamation -->
              </div>
              <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">Datos del proyecto</h3>
                <div class="mt-2" id="divtexto" >
                  <p id="ptexto" class="text-sm text-gray-500"></p>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
            <button id="cancelar" type="button" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">Cerrar</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  

    <div class="bg-gray-400 py-5">
        <div class="bg-white container mx-auto px-5 py-4 rounded-xl">
            
            <h1 class="text-center text-3xl">Mis Proyectos</h1>
             
            <p class="text-center mb-5">
                Administración general de mis proyectos
            </p>

            <div class="grid md:grid-cols-3 sm:grid-cols-2 gap-5">

                <div class="col-span-1">
                    <div class="shadow-lg p-3">
                        <h1 class="text-center text-3xl">Nuevo proyecto</h1>
                        <form action="#">
                            <table>
                                <tr>
                                    <td class="px-5 py-3 text-left text-base font-medium text-slate-900">Código del proyecto: </td>
                                    <td><input type="caja" class="caja"  name="codigo" id="codigo" ></td>
                                </tr>
                                <tr>
                                    <td class="px-5 text-left text-base font-medium text-slate-900">Nombre: </td>
                                    <td>
                                        <input class="caja" type="text" name="nombre" id="nombre" >
                                        <span id="errorNombre" class="hidden text-xs text-red-600">Datos no válidos en el nombre</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-5 py-3 text-left text-base font-medium text-slate-900">Tipo Proyecto:</td>
                                    <td>
                                        <select name="tipo" id="tipo" class="caja" required>
                                            <option value="">Seleccione el tipo de proyecto...</option>
                                            <option value="Investigación">Investigación</option>
                                            <option value="Extensión">Extensión</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-5 text-left text-base font-medium text-slate-900">Fecha Inicio:</td>
                                    <td><input class="caja" type="date" name="fecha_ini" id="fecha_ini" ></td>
                                </tr>
                                <tr>
                                    <td class="px-5 py-3 text-left text-base font-medium text-slate-900">Fecha Finalización:</td>
                                    <td><input class="caja" type="date" name="fecha_fin" id="fecha_fin" ></td>
                                </tr>
                                <tr>
                                    <td class="px-5 text-left text-base font-medium text-slate-900">Responsable:</td>
                                    <td><input class="caja" type="text" name="responsable" id="responsable" ></td>
                                </tr>
                                <tr>
                                    <td class="px-5 py-3 text-left text-base font-medium text-slate-900">Presupuesto:</td>
                                    <td><input class="caja" type="text" name="presupuesto" id="presupuesto"></td>
                                </tr>
                                <tr>
                                    <td class="px-5 text-left text-base font-medium text-slate-900">Tipo Persona:</td>
                                    <td class="text-base font-medium text-slate-900">
                                        Estudiante
                                        <input type="radio" name="tipo_persona" id="tipo_persona1" value="Estudiante" onchange="mod1()">
                                        Profesor
                                        <input type="radio" name="tipo_persona" id="tipo_persona2" value="Profesor" onchange="mod2()">
                                    </td>
                                </tr>


                                <!-- Datos profesor -->
                                <tr id="tp" class="hidden">
                                    <td class="px-5 py-3 text-left text-base font-medium text-slate-900">Tipo Profesor: </td>
                                    <td>
                                        <select name="tipo_profesor" id="tipo_profesor" class="caja">
                                            <option value="">Seleccione una opción</option>
                                            <option value="Planta">Planta</option>
                                            <option value="Catedratico">Catedratico</option>
                                            <option value="Ocasional">Ocasional</option>
                                        </select>
                                    </td>
                                </tr>


                                <!-- Datos estudiante -->
                                <tr id="sm" class="hidden">
                                    <td class="px-5 py-3 text-left text-base font-medium text-slate-900">Semestre Estudiante</td>
                                    <td>
                                        <select name="semestre" id="semestre" class="caja" >
                                            <option value="">Seleccione una opción</option>
                                            <option value="I">I</option>
                                            <option value="II">II</option>
                                            <option value="III">III</option>
                                        </select>
                                    </td>
                                </tr>

                                <tr>
                                    <td>&nbsp;</td>
                                    <td class=" text-left text-base font-medium text-slate-900">
                                        <button type="reset" id="btnAgregar" class="text-white bg-sky-600 hover:bg-sky-700 p-2 rounded-md font-medium" onclick="validar()" >
                                            Registrar Proyecto
                                        </button>    
                                    </td>
                                </tr>
                                
                            </table>
                        </form>
                    </div>                    
                </div>
                
                <div class="col-span-2">
                    <h1 class="text-center text-3xl">Listado de proyectos</h1>
                    <table class="min-w-full" id="tabla">
                        <thead class="bg-slate-50 border-b border-slate-200">
                            <tr>

                                <th scope="col" class="px-6 py-3 text-left text-sm font-medium text-slate-900">
                                    Nombre
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-sm font-medium text-slate-900">
                                    Responsable
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-sm font-medium text-slate-900">
                                    Fecha Inicio
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-sm font-medium text-slate-900">
                                    Fecha Fin
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-sm font-medium text-slate-900">
                                    Dias de Ejecución
                                </th>
                                <th scope="col" class="px-6 py-3 text-left text-sm font-medium text-slate-900">
                                    Acciones
                                </th>
                            </tr>
                        </thead>
                        
                    </table>
                </div>
            </div>


        </div>
    </div>

    <footer class="bg-gray-700 text-center text-white py-5 text-sm">
        <div class="flex justify-center"><img src="images/logou2.png" alt=""></div>
        <div>Diplomado en desarrollo de aplicaciones orientadas a la nube</div>
        <div>Universidad de Córdoba</div>
    </footer>
    

    <script>

        let modal = document.getElementById('mimodal');
        let quitar = document.getElementById('cancelar');

        quitar.onclick = function(){
            modal.classList.add('hidden');
        }
    </script>
    <script>


        function mod1(){

            modal1 = document.getElementById('sm');
            modal2 = document.getElementById('tp');
            modal1.classList.remove('hidden');
            modal2.classList.add('hidden');
        }

        function mod2(){

            let modal1 = document.getElementById('tp');
            let modal2 = document.getElementById('sm');
            modal1.classList.remove('hidden');
            modal2.classList.add('hidden');
        }
        function validar(){ 
                 var codigo, nombre, tipo, fechaini, fechafin, responsable, presupuesto, tipoPersona, tipoProfesor, semestre;
                 codigo = document.getElementById("codigo").value;
                 nombre = document.getElementById("nombre").value;
                 tipo = document.getElementById("tipo").value;
                 fechaini = document.getElementById("fecha_ini").value;
                 fechafin = document.getElementById("fecha_fin").value;
                 responsable = document.getElementById("responsable").value;
                 presupuesto = document.getElementById("presupuesto").value;
                 tipoPersona = document.getElementById("tipo_persona1").checked;
                 tipoProfesor = document.getElementById('tipo_profesor').value;
                 semestre = document.getElementById("semestre").value;
                 expresion = /[A-Za-z0-9]/;

                 if (codigo === "" || nombre === "" || tipo === "" || fechaini === "" || fechafin === "" || responsable === "" || presupuesto === "" ){
                    alert("Todos los campos son obligatorios");
                    return false;
                }else if(isNaN(codigo)){
                    alert("solo puede ingresar numeros en el codigo");
                    return false;
                }
                else if(!expresion.test(nombre)){
                    alert("solo puede ingresar texto y numeros en el nombre");
                    return false;
                }
                else if(!expresion.test(responsable)){
                    alert("solo puede ingresar texto y numeros en el responsable");
                    return false;
                }else if(isNaN(presupuesto)){
                    alert("solo puede ingresar numeros en el presupuesto");
                    return false;
                }else if(presupuesto<10000000 || presupuesto>50000000){
                    alert("el presupuesto debe ser mayor a 10'000.000 y menor a 50'000.000");
                    return false;
                }else if(fechaini < "2022-01-01"){
                    alert("la fecha inicial no puede ser menor al 01-01-2022");
                    return false;
                }
                else if(fechafin < "2022-01-01" || fechafin > "2022-12-31"){
                    alert("la fecha inicial no puede ser menor al 01-01-2022 ni menor al 31-12-2022");
                    return false;
                }
                else if(fechafin<fechaini){
                    alert("la fecha final no puede ser anterior a la fecha inicial");
                    return false;
                }
                else{

                    capturar();
                }
            }

        function capturar(){
            alert('Agrego el proyecto al array');
            var fechaInicio = new Date(document.getElementById("fecha_ini").value);
            var Fecha_fin = new Date(document.getElementById("fecha_fin").value);
            var diasDif = Fecha_fin.getTime() - fechaInicio.getTime();
            dias = Math.round(diasDif/(1000 * 60 * 60 * 24));

            function Datos(Codproyecto,Nombre,tipoProyecto,fechaIni,fechaFin,Responsable,Presupuesto,tipoPersona,tipoProfesor,Semestre,Dias){
                this.Codproyecto=Codproyecto;
                this.Nombre=Nombre;
                this.tipoProyecto=tipoProyecto;
                this.fechaIni=fechaIni;
                this.fechaFin=fechaFin;
                this.Responsable=Responsable;
                this.Presupuesto=Presupuesto;
                this.tipoPersona=tipoPersona;
                this.tipoProfesor=tipoProfesor;
                this.Semestre = Semestre;
                this.Dias = Dias;
            }

            var codproyectoCap = document.getElementById("codigo").value;
            var nombreCap = document.getElementById("nombre").value;
            var tipoProyectoCap = document.getElementById("tipo").value;
            var fechainiCap = document.getElementById("fecha_ini").value;
            var fechafinCap = document.getElementById("fecha_fin").value;
            var responsableCap = document.getElementById("responsable").value;
            var presupuestoCap = document.getElementById("presupuesto").value;
            var tipoPersonaCap = document.querySelector('input[name=tipo_persona]:checked').value;
            var tipoProfesorCap = document.getElementById("tipo_profesor").value;
            var semestreCap = document.getElementById("semestre").value;

            nuevoDato = new Datos(codproyectoCap,nombreCap,tipoProyectoCap,fechainiCap,fechafinCap,responsableCap,presupuestoCap,
                                  tipoPersonaCap,tipoProfesorCap,semestreCap,dias);
            agregar();

            modal1.classList.add('hidden');
            modal2.classList.add('hidden');
              
        }

        var arrayDatos = [];
        function agregar(){

            arrayDatos.push(nuevoDato);
            //console.log(arrayDatos);
            mostrarDatos();
            
        }

        function mostrarDatos(){
            let tabladatos = document.getElementById('tabla');
            let cuerpotabla = document.createElement('tbody');
            
            
            arrayDatos.forEach((p,i) => {

                cuerpotabla.innerHTML = '';
                cuerpotabla.setAttribute("id", i);

                let fila = document.createElement('tr');
                let td = document.createElement('td');

                td = document.createElement('td');
                td.classList.add('fila1');
                td.innerText = p.Nombre;
                fila.appendChild(td);
                
                td = document.createElement('td');
                td.classList.add('fila2');
                td.innerText = p.Responsable;
                fila.appendChild(td);

                td = document.createElement('td');
                td.classList.add('fila2');
                td.innerText = p.fechaIni;
                fila.appendChild(td);

                td = document.createElement('td');
                td.classList.add('fila2');
                td.innerText = p.fechaFin;
                fila.appendChild(td);

                td = document.createElement('td');
                td.classList.add('fila2');
                td.innerText = p.Dias;
                fila.appendChild(td);

                td = document.createElement('td');
                bt1 = document.createElement('button');
                bt1.classList.add('bt1');
                bt1.type = "button";
                bt2 = document.createElement('button');
                bt2.setAttribute("id", i);
                bt2.setAttribute("onclick", 'eliminar(this)');
                bt2.classList.add('bt2');
                bt2.type = "button";
                bt3 = document.createElement('button');
                bt3.setAttribute("id", i);
                bt3.setAttribute("onclick", 'vista(this)');
                bt3.classList.add('bt3');
                bt3.type = "button";

                bt1.innerText = "Editar";
                bt2.innerText = "Borrar";
                bt3.innerText = "Ver"; 
                td.appendChild(bt1);
                td.appendChild(bt2);
                td.appendChild(bt3);
                                                               
                fila.appendChild(td);

                cuerpotabla.appendChild(fila);

                //console.log(i);

            });

            tabladatos.appendChild(cuerpotabla);

        }

        function eliminar(prueba){

            let id = prueba.id;
            //arrayDatos.splice(id,1);
            document.getElementById(id).remove();
            console.log(arrayDatos);
            //console.log(id);
                  
        }


        function vista(k){

            let id = k.id;

             let modal = document.getElementById('mimodal');
             modal.classList.remove('hidden');

             var p = innerHTML ="<br>"

             let texto = document.getElementById("ptexto");
             texto.innerHTML = "Codigo del Proyecto: " + "<b>" + arrayDatos[id].Codproyecto + "</b>"
                   + p +"Nombre: " + "<b>" + arrayDatos[id].Nombre + "</b>"
                   + p +"Tipo Proyecto: " + "<b>" + arrayDatos[id].tipoProyecto + "</b>"
                   + p +"Fecha de Inicio: " + "<b>" + arrayDatos[id].fechaIni + "</b>"
                   + p +"Fecha de Finalizacion: "+ "<b>" + arrayDatos[id].fechaFin + "</b>"
                   + p +"Responsable: " + "<b>"+ arrayDatos[id].Responsable + "</b>"
                   + p +"Presupuesto: " + "<b>" + arrayDatos[id].Presupuesto + "</b>"
                   + p +"Tipo Persona: " + "<b>"+  arrayDatos[id].tipoPersona + "</b>"
                   + p +"Tipo Profesor: " + "<b>" + arrayDatos[id].tipoProfesor + "</b>"
                   + p +"Semestre: " + "<b>" + arrayDatos[id].Semestre + "</b>"
                   + p +"Dias en Ejecución: " + "<b>" + arrayDatos[id].Dias + "</b>"
         
        }
        
        
        /**
            Validaciones del proyecto
            ====================================

            1. Nombre solo letras o numeros: (alphanum)
            2. Tipo de proyecto (inv o ext)
            3. Fecha de inicio: Desde 01-01-2022
            4. Fecha de finalización: No menor a 01-01-2022 y no > 31-12-2022
            5. Responsable: (alphanum)
            6. Presupuesto: Enteros. Maximo $50.000.000. No < 10.000.000
            7. Tipo Persona (Est o Prof)

        */


        
        //var spanErrorNombre = document.getElementById('errorNombre');
        
       //function agregarProyecto() {
            // Validación

            // Agreguen el nuevo proyecto al array

            // Mostrar los proyectos

           // spanErrorNombre.classList.remove('hidden');

        //     alert('Agrego el proyecto al array')

        //}
        
       // var btn = document.getElementById("btnAgregar")
        //btn.addEventListener('click', agregarProyecto)

        /*
        var caja1 = document.getElementById('numero1')
        var caja2 = document.getElementById('numero2')
        var salida = document.getElementById('spanResultados')

        var suma = 0

        function mostrarDatos(){
            suma = parseInt(caja1.value)  + parseInt(caja2.value)
            salida.innerHTML = "Resultado: " + suma
        }

        var btn = document.getElementById("boton")
        btn.addEventListener("click", mostrarDatos, false)




        var menuResponsive = document.getElementById('mobile-menu');
        var btnOpen = document.getElementById('iconOpen');
        var btnClose = document.getElementById('iconClose');

        function hideShow() {
			if (menuResponsive.classList.contains('hidden')) {
				menuResponsive.classList.remove('hidden');
                btnOpen.classList.add('hidden');
                btnClose.classList.remove('hidden');
			} else {
				menuResponsive.classList.add('hidden');
                btnClose.classList.add('hidden');
                btnOpen.classList.remove('hidden');
			}
		}

        const btnMenu = document.getElementById('bntResponsive');
        btnMenu.addEventListener('click', hideShow)
        */
    </script>


</body>
</html>